<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GCP Architecture Diagram</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gojs/2.3.11/go.js"></script>
    <style>
        body { font-family: Arial, sans-serif; display: flex; flex-direction: column; overflow: hidden; }
        #menu { width: 100%; padding: 10px; background: #f9f9f9; overflow-x: auto; white-space: nowrap; border-bottom: 2px solid #ccc; }
        #diagramDiv { flex-grow: 1; height: calc(100vh - 50px); border: 1px solid #ccc; }
        .menu-item { display: inline-block; cursor: pointer; padding: 8px; margin-right: 10px; border: 1px solid #ddd; border-radius: 5px; }
        .menu-item:hover { background-color: #e0e0e0; }
        .toggle-btn { cursor: pointer; padding: 5px; font-weight: bold; }
        @media (min-width: 768px) {
            body { flex-direction: row; }
            #menu { width: 250px; height: 100vh; border-right: 2px solid #ccc; border-bottom: none; white-space: normal; }
            #diagramDiv { height: 100vh; }
        }
    </style>
</head>
<body>
    <div id="menu">
        <h3>GCP Services</h3>
        <div class="menu-item toggle-btn" onclick="toggleGroup('Compute')">Compute</div>
        <div class="menu-item toggle-btn" onclick="toggleGroup('Networking')">Networking</div>
        <div class="menu-item toggle-btn" onclick="toggleGroup('Security')">Security</div>
        <div class="menu-item toggle-btn" onclick="toggleGroup('Storage')">Storage</div>
        <div class="menu-item toggle-btn" onclick="toggleGroup('Monitoring')">Monitoring</div>
        <div class="menu-item toggle-btn" onclick="toggleGroup('Database')">Database</div>
        <div class="menu-item toggle-btn" onclick="toggleGroup('AI')">AI & ML</div>
        <div class="menu-item toggle-btn" onclick="toggleGroup('Developer')">Developer Tools</div>
        <div class="menu-item toggle-btn" onclick="toggleGroup('Analytics')">Analytics</div>
    </div>
    <div id="diagramDiv"></div>
    
    <script>
        var $ = go.GraphObject.make;
        var diagram = $(go.Diagram, "diagramDiv", {
            "undoManager.isEnabled": true,
            layout: $(go.LayeredDigraphLayout, { direction: 90, layerSpacing: 50 }),
            "animationManager.isEnabled": true
        });

        diagram.nodeTemplate = $(go.Node, "Auto",
            { click: (e, obj) => highlightNode(obj.data.key) },
            $(go.Panel, "Vertical",
                $(go.TextBlock, { font: "bold 12px sans-serif", margin: 5, background: "#ddd", padding: 5, width: "100%", textAlign: "center" }, new go.Binding("text", "header")),
                $(go.Shape, "RoundedRectangle", { fill: "lightblue", strokeWidth: 1, stroke: "black" },
                    new go.Binding("fill", "color")
                ),
                $(go.TextBlock, { margin: 5 }, new go.Binding("text", "key"))
            )
        );

        diagram.groupTemplate = $(go.Group, "Auto",
            { layout: $(go.GridLayout, { wrappingColumn: 2, spacing: new go.Size(20, 20) }) },
            $(go.Panel, "Horizontal",
                $(go.TextBlock, { margin: 5, font: "bold 14px sans-serif" }, new go.Binding("text", "key")),
                $(go.Panel, "Auto",
                    $(go.Shape, "Circle", { width: 20, height: 20, fill: "lightgray", stroke: "black", cursor: "pointer" },
                        new go.Binding("figure", "expanded", v => v ? "Minus" : "Plus"),
                        { click: (e, obj) => toggleGroup(obj.part) }
                    )
                )
            ),
            $(go.Shape, "Rectangle", { fill: "lightgray", stroke: "black" }),
            $(go.Panel, "Vertical", $(go.Placeholder))
        );

        function toggleGroup(group) {
            var isExpanded = diagram.findNodeForKey(group).isSubGraphExpanded;
            diagram.startTransaction("toggleGroup");
            diagram.findNodeForKey(group).isSubGraphExpanded = !isExpanded;
            diagram.commitTransaction("toggleGroup");
        }

        var nodes = [];
        var links = [];
        var groups = ["Compute", "Networking", "Security", "Storage", "Monitoring", "Database", "AI", "Developer", "Analytics"];
        
        groups.forEach(group => {
            nodes.push({ key: group, isGroup: true, expanded: true });
        });

        var services = {
            "Compute": ["GCE", "GKE", "CloudRun", "AppEngine", "Batch"],
            "Networking": ["VPC", "CloudDNS", "CloudCDN", "CloudLoadBalancing", "Interconnect"],
            "Security": ["IAM", "CloudArmor", "SecurityCommandCenter", "KeyManagement", "DLP"],
            "Storage": ["CloudStorage", "Filestore", "PersistentDisks", "TransferService", "Backup"],
            "Monitoring": ["CloudLogging", "CloudMonitoring", "ErrorReporting", "CloudTrace", "Profiler"],
            "Database": ["BigQuery", "CloudSQL", "Firestore", "Spanner", "Memorystore"],
            "AI": ["VertexAI", "AutoML", "AIPlatform", "VisionAI", "NaturalLanguage"],
            "Developer": ["CloudBuild", "CloudFunctions", "ArtifactRegistry", "CloudCode", "SourceRepo"],
            "Analytics": ["Dataflow", "PubSub", "Dataproc", "Looker", "BigTable"]
        };

        Object.keys(services).forEach(group => {
            services[group].forEach(service => {
                nodes.push({ key: service, group: group, color: "lightgray", header: service });
                links.push({ from: service, to: "BigQuery" });
            });
        });

        diagram.model = new go.GraphLinksModel(nodes, links);
    </script>
</body>
</html>
